---
name: dev-coding-plan
description: 编码计划技能。将技术方案分解为可执行的编码任务，确定实现顺序和依赖关系。开发流程第 4 阶段。
---

# 编码计划 (Coding Plan)

> 开发流程第 4 阶段：分解任务 → 确定顺序 → 生成待办清单

---

## 前置条件

- 已完成技术方案（`/dev-tech-spec`）
- 技术方案文档已确认

---

## 执行流程

```
技术方案文档
     ↓
┌─────────────────────────────────────┐
│ 1. 任务分解                          │
│    - 按模块拆分                      │
│    - 按功能点拆分                    │
│    - 识别原子任务                    │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 2. 依赖分析                          │
│    - 任务间依赖                      │
│    - 外部依赖                        │
│    - 阻塞点识别                      │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 3. 优先级排序                        │
│    - 关键路径                        │
│    - 风险优先                        │
│    - 可并行任务                      │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 4. 生成待办清单                      │
│    - 任务列表                        │
│    - 验收标准                        │
│    - 预估工作量                      │
└─────────────────────────────────────┘
     ↓
人工确认 → 进入编码阶段
```

---

## 输出模板

```markdown
# 编码计划：[需求标题]

## 1. 任务概览

| 总任务数 | 预估工作量 | 关键路径任务 |
|----------|-----------|-------------|
| [N] 个 | [X] 小时 | [M] 个 |

## 2. 任务依赖图

```
[任务1] ──┐
          ├──→ [任务3] ──→ [任务5]
[任务2] ──┘         │
                    └──→ [任务4] ──→ [任务6]
```

## 3. 详细任务列表

### 阶段一：基础设施

#### 任务 1.1：[任务名称]
- **描述**：[详细描述]
- **文件**：[需要创建/修改的文件]
- **依赖**：无 / [依赖的任务]
- **验收标准**：
  - [ ] [标准1]
  - [ ] [标准2]

### 阶段二：核心功能

#### 任务 2.1：[任务名称]
...

### 阶段三：集成测试

#### 任务 3.1：[任务名称]
...

## 4. 风险任务

| 任务 | 风险 | 缓解措施 |
|------|------|----------|
| [任务名] | [风险描述] | [措施] |

## 5. 可并行任务

以下任务可以并行执行：
- 组1：[任务A], [任务B]
- 组2：[任务C], [任务D]

## 6. 下一步

开始编码，使用 `/dev-coding`
```

---

## 任务分解原则

### 粒度控制

| 类型 | 建议粒度 | 示例 |
|------|----------|------|
| 新增类 | 每个类一个任务 | "创建 AIButtonField 字段类" |
| 修改类 | 每个修改点一个任务 | "在 FieldRegistry 中注册新字段" |
| 配置 | 每个配置文件一个任务 | "添加 AIButton 字段前端配置" |
| 测试 | 每个测试类一个任务 | "编写 AIButtonField 单元测试" |

### 依赖类型

| 依赖类型 | 说明 | 处理方式 |
|----------|------|----------|
| 强依赖 | 必须先完成 | 顺序执行 |
| 弱依赖 | 可以 mock | 并行开发 |
| 外部依赖 | 第三方服务 | 标记阻塞点 |

---

## 任务模板

### 新增类任务

```markdown
#### 任务：创建 [类名]

- **类型**：新增
- **路径**：`[完整路径]`
- **继承/实现**：[父类/接口]
- **核心方法**：
  - `method1()`: [说明]
  - `method2()`: [说明]
- **依赖**：[依赖任务]
- **验收标准**：
  - [ ] 类创建完成
  - [ ] 编译通过
  - [ ] 单元测试通过
```

### 修改类任务

```markdown
#### 任务：修改 [类名]

- **类型**：修改
- **路径**：`[完整路径]`
- **修改内容**：
  - [修改点1]
  - [修改点2]
- **影响范围**：[可能影响的其他类]
- **验收标准**：
  - [ ] 修改完成
  - [ ] 原有功能不受影响
  - [ ] 新功能正常
```
