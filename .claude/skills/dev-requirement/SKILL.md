---
name: dev-requirement
description: 需求分析技能。理解用户需求、识别涉及模块、关联现有知识、输出需求分析文档。开发流程第 1 阶段。
---

# 需求分析 (Requirement Analysis)

> 开发流程第 1 阶段：理解需求 → 关联知识 → 输出分析文档

---

## 执行流程

```
用户需求输入
     ↓
┌─────────────────────────────────────┐
│ 1. 加载知识库                        │
│    - 读取项目知识库                   │
│    - 读取专有名词库                   │
│    - 识别相关模块知识                 │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 2. 需求理解                          │
│    - 提取核心意图                    │
│    - 识别业务场景                    │
│    - 标记模糊/不确定点               │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 3. 知识关联                          │
│    - 匹配相关模块                    │
│    - 查找类似实现                    │
│    - 识别扩展点                      │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 4. 澄清询问（如有）                   │
│    - 列出不明确的点                  │
│    - 提供选项供用户选择               │
│    - 等待用户确认                    │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 5. 输出需求分析文档                   │
│    - 需求概述                        │
│    - 涉及模块                        │
│    - 关键约束                        │
│    - 待确认事项                      │
└─────────────────────────────────────┘
     ↓
人工确认 → 进入技术分析阶段
```

---

## 知识库路径

| 知识类型 | 路径 |
|----------|------|
| 知识库索引 | `docs/AI-Memory/README.md` |
| 专有名词库 | `docs/AI-Memory/00-glossary/terminology.md` |
| 架构知识 | `docs/AI-Memory/01-architecture/*.md` |
| 核心引擎 | `docs/AI-Memory/02-core-engines/*.md` |
| 框架组件 | `docs/AI-Memory/03-framework/*.md` |
| 桥接层 | `docs/AI-Memory/04-bridge/*.md` |
| 服务层 | `docs/AI-Memory/05-services/*.md` |

---

## 输出模板

```markdown
# 需求分析：[需求标题]

## 1. 需求概述
[用一句话描述需求的核心目标]

## 2. 业务场景
- 场景1：[描述]
- 场景2：[描述]

## 3. 涉及模块
| 模块 | 关联度 | 说明 |
|------|--------|------|
| [模块名] | 高/中/低 | [为什么涉及] |

## 4. 关键约束
- 约束1：[描述]
- 约束2：[描述]

## 5. 关联知识
- [模块知识链接]
- [相似实现参考]

## 6. 待确认事项
- [ ] [需要澄清的问题1]
- [ ] [需要澄清的问题2]

## 7. 下一步
进入技术分析阶段，使用 `/dev-tech-analysis`
```

---

## 模块识别规则

根据关键词识别涉及的模块：

| 关键词 | 模块 | 知识库文件 |
|--------|------|-------------|
| 表单、字段、Document、Element | 表单引擎 | `02-core-engines/form-engine.md` |
| 流程、审批、任务、节点、网关 | 流程引擎 | `02-core-engines/workflow-engine.md` |
| 列表、页面、按钮、渲染 | 业务引擎 | `02-core-engines/business-engine.md` |
| AI、技能、Agent、平台 | AI能力 | `02-core-engines/ai-capabilities.md` |
| 定时、调度、TriggerHandle | 定时任务 | `04-bridge/scheduler-handler.md` |
| 事件、BatchableEvent、聚合 | 事件系统 | `03-framework/event-system.md` |
| WeDoc、智能表格、同步 | 智能表格同步 | `04-bridge/wedoc-sync.md` |
| 设计器、工作台、Repository | 工作台服务 | `05-services/workbench.md` |
| 表达式、Aviator、公式 | 表达式引擎 | `03-framework/expression-engine.md` |
| 脚本、Groovy、JavaScript | 脚本引擎 | `03-framework/script-engine.md` |
| 连接器、Connector、第三方 | 连接器引擎 | `03-framework/connector-engine.md` |

---

## 使用示例

```
用户: 我需要给表单添加一个新的 AI 按钮字段，点击后调用 Coze 平台的 Agent

AI 执行 /dev-requirement:
1. 加载知识库
2. 识别涉及模块：表单引擎（新字段）、AI能力（Coze平台）、业务引擎（按钮行为）
3. 输出需求分析文档
4. 询问：按钮样式？调用结果展示方式？是否需要流式响应？
5. 用户确认后，建议进入技术分析阶段
```
