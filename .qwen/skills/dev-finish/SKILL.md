---
name: dev-finish
description: L2对齐+文档技能。合并方案对齐与文档生成，快速完成需求收尾。适用于中等复杂度任务。
---

# 对齐+文档 (Finish)

> L2中等流程第5阶段：方案对齐 → 文档生成 → 需求完成

---

## 适用场景

- 新增表单字段类型完成
- 新增业务组件完成
- 常规功能开发完成
- 模块内扩展完成

---

## 执行流程

```
编码+测试完成
     ↓
┌─────────────────────────────────────┐
│ 1. 快速对齐                          │
│    - 对比技术方案与实现              │
│    - 识别主要偏差                    │
│    - 记录变更决策                    │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 2. 文档生成                          │
│    - 生成需求总结                    │
│    - 更新相关Memory                  │
│    - 提取新术语                      │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 3. 完成确认                          │
│    - 展示完成报告                    │
│    - 准备提交                        │
│    - 更新进度状态                    │
└─────────────────────────────────────┘
     ↓
需求完成 ✅
```

---

## 输出模板

```markdown
## 需求完成报告

### 基本信息
- **需求**: [需求标题]
- **级别**: L2 (中等任务)
- **流程**: 5阶段 / 2确认
- **耗时**: [总耗时]

---

### 对齐检查

| 维度 | 方案设计 | 实际实现 | 状态 |
|------|----------|----------|------|
| 架构 | [设计] | [实现] | ✅ 一致 |
| 接口 | [设计] | [实现] | ✅ 一致 |
| 数据模型 | [设计] | [实现] | ⚠️ 微调 |

**偏差说明**:
- [偏差1]: [原因]

**变更决策**:
- [决策1]: [原因]

---

### 产物清单

| 产物 | 路径 |
|------|------|
| 需求分析 | docs/需求记录/[需求名]/需求分析.md |
| 技术方案 | docs/需求记录/[需求名]/技术方案.md |
| 编码计划 | docs/需求记录/[需求名]/编码计划.md |
| 需求总结 | docs/需求记录/[需求名]/需求总结.md |
| 业务代码 | [路径列表] |
| 测试代码 | [路径列表] |

---

### 代码统计
- 新增文件: [N]
- 修改文件: [M]
- 代码行数: +[X] / -[Y]
- 测试覆盖率: [Z]%

---

### Memory 更新

**新增术语**:
| 术语 | 定义 |
|------|------|
| [术语1] | [定义] |

**模块知识更新**:
- [模块]: [更新内容]

---

### 提交信息
```
feat: [简要描述]

- [改动点1]
- [改动点2]
- [改动点3]
```

---

[确认完成]
```

---

## 与完整流程对比

| 项目 | 完整流程 (阶段7+8) | L2合并 |
|------|-------------------|--------|
| 时间 | 30-60分钟 | 15-20分钟 |
| 产物 | 对齐报告 + 需求总结 + Memory更新 | 合并的完成报告 |
| 确认 | 2次 | 0次(最终展示) |
| Memory | 详细更新 | 关键更新 |

---

## 进度文件更新

完成时更新 `.progress.json`:

```json
{
  "status": "completed",
  "endTime": "2026-02-09T12:00:00",
  "metrics": {
    "totalDuration": 7200,
    "level": "L2",
    "stagesCompleted": 5,
    "confirmations": 2,
    "filesModified": 7,
    "linesOfCode": 320,
    "testCoverage": 75
  }
}
```

---

## 使用示例

```
编码+测试完成:
- 代码: 5个新文件, 2个修改
- 测试: 10个用例, 78%覆盖率

AI 执行对齐+文档:
1. 对齐检查:
   - 架构: ✅ 一致
   - 接口: ✅ 一致
   - 数据模型: ⚠️ 新增一个字段(params)

2. 文档生成:
   - 需求总结.md: 已生成
   - 新术语: AIButtonField, AIButtonHandler
   - 模块知识: form-engine.md 更新候选

3. 完成报告:
   - 耗时: 2小时15分钟
   - 代码: +320行
   - 覆盖率: 78%

┌─────────────────────────────────────────────────────────────┐
│  🎉 需求完成                                                 │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  需求: 为表单引擎添加AI按钮字段                              │
│  级别: L2 (中等任务)                                        │
│  流程: 5阶段 / 2确认                                        │
│                                                              │
│  耗时: 2小时15分钟                                          │
│  代码: 7个文件 / +320行                                     │
│  测试: 10个用例 / 78%覆盖率                                 │
│                                                              │
│  [开始新需求] [查看产物]                                    │
└─────────────────────────────────────────────────────────────┘
```
