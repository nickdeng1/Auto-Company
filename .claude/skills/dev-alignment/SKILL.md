---
name: dev-alignment
description: 方案对齐技能。检查实现是否与技术方案一致，识别偏差并记录。开发流程第 7 阶段。
---

# 方案对齐 (Alignment Check)

> 开发流程第 7 阶段：对比方案 → 识别偏差 → 记录变更

---

## 前置条件

- 已完成单元测试（`/dev-unit-test`）
- 所有测试通过

---

## 执行流程

```
实现代码 + 技术方案
     ↓
┌─────────────────────────────────────┐
│ 1. 方案回顾                          │
│    - 重新阅读技术方案                 │
│    - 列出设计要点                    │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 2. 实现对比                          │
│    - 架构是否一致                    │
│    - 接口是否一致                    │
│    - 数据模型是否一致                │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 3. 偏差识别                          │
│    - 记录所有偏差                    │
│    - 分析偏差原因                    │
│    - 评估偏差影响                    │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 4. 决策记录                          │
│    - 记录实现过程中的决策             │
│    - 记录改进建议                    │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 5. 输出对齐报告                      │
│    - 对齐状态                        │
│    - 偏差列表                        │
│    - 知识沉淀                        │
└─────────────────────────────────────┘
     ↓
人工确认 → 进入文档阶段
```

---

## 输出模板

```markdown
# 方案对齐报告：[需求标题]

## 1. 对齐状态

| 维度 | 状态 | 说明 |
|------|------|------|
| 架构设计 | ✅ 一致 / ⚠️ 偏差 / ❌ 不一致 | [说明] |
| 接口设计 | ✅ 一致 / ⚠️ 偏差 / ❌ 不一致 | [说明] |
| 数据模型 | ✅ 一致 / ⚠️ 偏差 / ❌ 不一致 | [说明] |
| 核心流程 | ✅ 一致 / ⚠️ 偏差 / ❌ 不一致 | [说明] |

## 2. 偏差详情

### 偏差 1：[偏差标题]

| 项目 | 内容 |
|------|------|
| 方案设计 | [原设计] |
| 实际实现 | [实际实现] |
| 偏差原因 | [为什么产生偏差] |
| 影响评估 | [对功能/性能/可维护性的影响] |
| 处理方式 | 接受 / 需要调整 |

### 偏差 2：...

## 3. 实现过程决策

### 决策 1：[决策标题]

| 项目 | 内容 |
|------|------|
| 背景 | [决策背景] |
| 选项 | 1. [选项A] 2. [选项B] |
| 决策 | [选择的选项] |
| 理由 | [为什么这样选择] |

## 4. 知识沉淀

### 4.1 新增专有名词

| 名词 | 定义 | 上下文 |
|------|------|--------|
| [名词] | [定义] | [在哪里使用] |

### 4.2 模块知识更新

[需要更新到模块知识文档的内容]

### 4.3 最佳实践

[实现过程中发现的最佳实践]

### 4.4 踩坑记录

[实现过程中遇到的问题和解决方案]

## 5. 下一步

进入文档阶段，使用 `/dev-documentation`
```

---

## 对比维度

### 架构对比

| 检查点 | 说明 |
|--------|------|
| 组件划分 | 是否按方案划分组件 |
| 层次结构 | 是否遵循分层架构 |
| 依赖方向 | 依赖是否符合设计 |

### 接口对比

| 检查点 | 说明 |
|--------|------|
| URL 路径 | 是否与方案一致 |
| 请求参数 | 字段是否完整 |
| 响应格式 | 结构是否一致 |
| 错误码 | 是否定义完整 |

### 数据模型对比

| 检查点 | 说明 |
|--------|------|
| 实体字段 | 是否与方案一致 |
| 字段类型 | 类型是否正确 |
| 关系映射 | 关联是否正确 |

---

## 知识沉淀

### 更新专有名词库

如果实现过程中引入了新术语，需要更新：
`docs/AI-Memory/00-glossary/terminology.md`

### 更新模块知识

如果发现模块知识文档有缺失或过时，需要更新：
`docs/AI-Memory/` 对应的模块文档（02-core-engines/, 03-framework/, 04-bridge/）
