---
name: dev-tech-analysis
description: 技术分析技能。分析需求的技术实现路径、识别扩展点、评估改动范围。开发流程第 2 阶段。
---

# 技术分析 (Technical Analysis)

> 开发流程第 2 阶段：分析实现路径 → 识别扩展点 → 评估改动范围

---

## 前置条件

- 已完成需求分析（`/dev-requirement`）
- 需求分析文档已确认

---

## 执行流程

```
需求分析文档
     ↓
┌─────────────────────────────────────┐
│ 1. 加载模块知识                      │
│    - 读取涉及模块的详细文档           │
│    - 理解模块架构                    │
│    - 识别核心类和扩展点               │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 2. 代码探索                          │
│    - 搜索相关代码文件                │
│    - 分析现有实现模式                │
│    - 找到类似功能参考                │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 3. 实现路径分析                      │
│    - 确定修改点                      │
│    - 识别新增组件                    │
│    - 评估影响范围                    │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 4. 技术风险评估                      │
│    - 识别技术难点                    │
│    - 评估兼容性风险                  │
│    - 标记需要注意的点                │
└─────────────────────────────────────┘
     ↓
┌─────────────────────────────────────┐
│ 5. 输出技术分析文档                   │
│    - 实现路径                        │
│    - 改动清单                        │
│    - 技术风险                        │
│    - 参考代码                        │
└─────────────────────────────────────┘
     ↓
人工确认 → 进入技术方案阶段
```

---

## 输出模板

```markdown
# 技术分析：[需求标题]

## 1. 实现路径

### 1.1 整体思路
[一段话描述技术实现的核心思路]

### 1.2 技术路线图
```
[步骤1] → [步骤2] → [步骤3] → ...
```

## 2. 涉及模块详解

### 2.1 [模块名称]

**扩展点**：[扩展点名称]
**参考实现**：[现有类似实现的类名和路径]
**改动方式**：新增/修改/扩展

## 3. 改动清单

| 序号 | 文件/类 | 改动类型 | 改动说明 |
|------|---------|----------|----------|
| 1 | [路径] | 新增/修改 | [说明] |

## 4. 技术风险

| 风险 | 级别 | 缓解措施 |
|------|------|----------|
| [风险描述] | 高/中/低 | [措施] |

## 5. 参考代码

### 5.1 [参考点1]
- 文件：[路径]
- 说明：[为什么参考这个]

## 6. 开放问题

- [ ] [需要进一步确认的技术问题]

## 7. 下一步
进入技术方案阶段，使用 `/dev-tech-spec`
```

---

## 代码探索策略

### 按模块探索

| 模块 | 探索路径 | 关键类 |
|------|----------|--------|
| 表单引擎 | `do1cloud-form/form-engine/` | BaseFormField, Command |
| 流程引擎 | `do1cloud-bpmn/bpmn-engine/` | Behavior, TaskService |
| 业务引擎 | `do1cloud-business/biz-engine/` | ComponentBehavior, ButtonBehavior |
| 定时任务 | `bpms-runtime/scheduler/` | TriggerHandle |
| 事件系统 | `qiqiao-framework-core/.../event/` | BatchableEngineEvent |
| 智能表格 | `bpms-runtime/form/.../wedoc/` | SyncStrategy, Converter |
| 工作台 | `bpms-workbench/core/` | DefinitionService |
| AI能力 | `qiqiao-ai-agent/` | AgentClientAdapter |

### 探索命令

```bash
# 搜索类定义
grep -r "class [ClassName]" --include="*.java"

# 搜索接口实现
grep -r "implements [InterfaceName]" --include="*.java"

# 搜索注解使用
grep -r "@[AnnotationName]" --include="*.java"
```

---

## 扩展点识别

### 常见扩展模式

| 模块 | 扩展模式 | 说明 |
|------|----------|------|
| 表单引擎 | 新增字段类型 | 继承 BaseFormField，添加 @Widget |
| 流程引擎 | 新增节点行为 | 实现 Behavior 接口 |
| 业务引擎 | 新增页面组件 | 继承 AbstractBusinessBehavior |
| 业务引擎 | 新增按钮行为 | 继承 AbstractBusinessButtonBehavior |
| 定时任务 | 新增任务类型 | 实现 TriggerHandle |
| 事件系统 | 新增事件类型 | 继承 BatchableEngineEvent |
| AI能力 | 新增平台适配 | 实现 AgentBaseClientAdapter |
